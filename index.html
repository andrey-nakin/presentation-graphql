<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>GraphQL как способ организации back-end API</title>

    <link rel="stylesheet" href="dist/reset.css">
    <link rel="stylesheet" href="dist/reveal.css">
    <link rel="stylesheet" href="dist/theme/white.css">

    <!-- Theme used for syntax highlighted code -->
    <link rel="stylesheet" href="plugin/highlight/monokai.css">


    <style>

        .long-code {
            font-size: 0.3em !important;
        }

        .qr-code {
            zoom: 50%;
        }

.reveal h1,
.reveal h2,
.reveal h3,
.reveal h4,
.reveal h5,
.reveal h6 {
  font-family: "DejaVu Sans", "Carlito", "Cantarell", "Helvetica";
}




    </style>
</head>
<body>
<div class="reveal">
    <div class="slides">

        <section>
            <h2>GraphQL как способ организации back-end&nbsp;API</h2>

            <p>Андрей Накин</p>
            <p>Компания &laquo;Рексофт&raquo;</p>
            <p>Февраль 2023</p>
        </section>

        <section>
            <h2>Описание презентации</h2>

            <ul>
                <li>Краткий и поверхностный обзор технологии GraphQL.</li>
                <li>Хорошо знакомые с GraphQL скорее всего не найдут ничего нового.</li>
                <li>Будут ссылки в виде QR-кодов.</li>
            </ul>
        </section>

        <section>
            <h2>Содержание</h2>

            <ol>
                <li>Какие проблемы решает GraphQL и как?</li>
                <li>GraphQL в многосервисном приложении.</li>
                <li>Проблемы GraphQL.</li>
            </ol>
        </section>

        <section>

            <h3>Пример RESTful API</h3>
            <table width="100%">
                <tr>
                    <td>
                        <div>
                            API&nbsp;филиалов
                            <pre class="long-code">
                                <code data-trim data-noescape>
                                    GET branches/br-1

                                    {
                                      "id":   "br-1",
                                      "name": "Московский"
                                    }
                                </code>
                            </pre>
                        </div>
                    </td>

                    <td>
                        <div class="fragment">
                            API&nbsp;отделов
                            <pre class="long-code">
                                <code data-trim data-noescape>
                                    GET departments/dep-1

                                    {
                                      "id":        "dep-1",
                                      "branch_id": "br-1",
                                      "name":      "Консалтинг"
                                    }
                                </code>
                            </pre>
                        </div>
                    </td>

                    <td>
                        <div class="fragment">
                            API&nbsp;сотрудников
                            <pre class="long-code">
                                <code data-trim data-noescape>
                                    GET employees/emp-1

                                    {
                                      "id":       "emp-1",
                                      "dep_id":   "dep-1",
                                      "family":   "Обломов",
                                      "given":    "Илья",
                                      "patronic": "Ильич",
                                      "photo":    "/9j/4AAQSkZJRgABAQ..."
                                    }
                                </code>
                            </pre>
                        </div>
                    </td>
                </tr>
            </table>

            <ul class="fragment">
                <li>API 100% нормализовано.
                <li>На back-end оно реализуется при помощи простых операций <code>findAll</code>/<code>findById</code>.
            </ul>
        </section>

        <section>
            <h3>Задача</h3>

            По известному ID сотрудника получить название его филиала.
        </section>

        <section>
            <h3>1. Решение &laquo;в лоб&raquo;</h3>

            <p>Выполнить 3 <u>последовательных</u> запроса к&nbsp;API.</p>

            <h4 class="fragment">Недостатки</h4>
            <ul>
                <li class="fragment fade-in-then-semi-out">Утроенное время выполнения операции.</li>
                <li class="fragment fade-in-then-semi-out">Код на клиенте перестаёт быть тривиальным.</li>
                <li class="fragment fade-in-then-semi-out">Вероятность получения несогласованных данных.</li>
            </ul>
        </section>

        <section>
            <h3>2. Денормализация API</h3>

            <p>Можно добавить в данные сотрудника соответствующие поля:</p>

            <pre>
                <code data-trim data-noescape>
                    GET employees/emp-1?have_dep_branch_data=true

                    {
                      "id":              "emp-1",
                      "dep_id":          "dep-1",
                      "family":          "Обломов",
                      "given":           "Илья",
                      "patronic":        "Ильич",
                      "photo":           "/9j/4AAQSkZJRgABAQ...",
                      "dep_branch_id":   "br-1",
                      "dep_branch_name": "Московский"
                    }
                </code>
            </pre>

            <ul class="fragment">
                <li>А есть более общее решение?</li>
            </ul>
        </section>

        <section>
            <h3>Спасибо за внимание!</h3>

            <p>Исходный код данной презентации доступен по адресу:</p>
            <p><a href="https://bit.ly/3XC6A0Z">https://bit.ly/3XC6A0Z</a></p>
            <img src="images/bit.ly_3XC6A0Z.png" class="qr-code">
        </section>

    </div>
</div>

<script src="dist/reveal.js"></script>
<script src="plugin/notes/notes.js"></script>
<script src="plugin/markdown/markdown.js"></script>
<script src="plugin/highlight/highlight.js"></script>
<script src="plugin/zoom/zoom.js"></script>
<script>
         // More info about initialization & config:
         // - https://revealjs.com/initialization/
         // - https://revealjs.com/config/
         Reveal.initialize({
            hash: true,
            transition: 'fade',

            // Learn about plugins: https://revealjs.com/plugins/
            plugins: [ RevealMarkdown, RevealHighlight, RevealNotes, RevealZoom ]
         });


















</script>
</body>
</html>
